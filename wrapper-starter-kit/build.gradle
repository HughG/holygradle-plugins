import holygradle.util.Helperdef pluginsRepository = artifactoryServer + "plugins-release"def scriptPath = "script/build.gradle"def script = new File(project.projectDir, scriptPath)def targetDir = "${project.projectDir}/wrapperTemp"task makeWrapper(type: Wrapper) {    jarFile "${targetDir}/gradle/gradle-wrapper.jar"    scriptFile "${targetDir}/gw"    doLast {        def gwContent = new File(project.rootProject.projectDir, "gw.bat").text        def gwFile = new File("${targetDir}/gw.bat")        gwFile.write(gwContent)    }}project.gradle.taskGraph.whenReady {    if (project.gradle.taskGraph.hasTask(makeWrapper)) {        def customGradleVersion = Helper.getLatestVersionNumber(project, "holygradle", "custom-gradle")        if (customGradleVersion == null) {            throw new RuntimeException("Could not find any version of holygradle:custom-gradle in the repository.")        }        makeWrapper.gradleVersion customGradleVersion        makeWrapper.distributionUrl pluginsRepository + "/holygradle/custom-gradle/${customGradleVersion}/custom-gradle-${project.gradle.gradleVersion}-${customGradleVersion}.zip"    }}task makeZip(type: Zip) {    dependsOn makeWrapper    group = "Main"    description = 'Creates a zip file containing the starter-kit.'    baseName = project.name    from("${targetDir}/gradle") {        into("gradle")    }    from("${targetDir}/gw.bat")    from(script) {        into ("/")    }    doFirst {        if (!script.exists()) {            println "Please define the Gradle script to be included in the wrapper starter kit."            println "Create it here: '${scriptPath}'"            throw new RuntimeException("Can't find '${scriptPath}'")        }    }}artifacts {    "default" makeZip}