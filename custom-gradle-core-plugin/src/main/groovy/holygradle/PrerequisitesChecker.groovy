package holygradleimport org.gradle.*import org.gradle.api.*class PrerequisitesChecker {    public final String name    private final Project project    private final Closure checkClosure    private boolean ok = true    private boolean allowFailure = true        PrerequisitesChecker(Project project, String name, Closure checkClosure) {        this.project = project        this.name = name        this.checkClosure = checkClosure    }        public void run(def params) {        checkClosure(this, params)    }        public boolean runWithoutFailure(def params) {        ok = true        allowFailure = false        checkClosure(this, params)        allowFailure = true        ok    }        public void fail(String text) {        wrapMessage(text)        ok = false        if (allowFailure) {            throw new RuntimeException("Check '${name}' failed.")        }    }        public void wrapMessage(String text, int columns = 80) {        println "-"*columns        text.eachLine { lnText ->            def line = ""            lnText.split(" ").each { word ->                if (word.length() > columns) {                    def part = word.substring(0, columns - line.length())                    line += part                    word = word.substring(part.length())                }                if (line.length() + word.length() > columns) {                    println line.trim()                    line = ""                }                while (word.length() > columns) {                    println word.substring(0, columns)                    word = word.substring(columns)                }                line += word + " "                   }            println line.trim()        }        println "-"*columns    }}