dependencies {
    groovy group: 'org.codehaus.groovy', name: 'groovy', version: '1.8.2'
    groovy group: 'org.codehaus.groovy.modules.http-builder', name: 'http-builder', version: '0.6'
    compile group: 'com.aragost.javahg', name: 'javahg', version: '0.5-SNAPSHOT'
    compile group: 'org.tmatesoft.svnkit', name: 'svnkit', version: '1.7.5'
    testCompile group: 'net.lingala.zip4j', name: 'zip4j', version: '1.3.1'
    
    // These dependencies are assumed to exist in an internal repository. They are not
    // currently published to a public local even though all necessary resources are
    // already in the public domain.
    runtime group: 'org', name: 'sevenZip', version:'9.20.1', configuration: 'basic'
    runtime "selenic:Mercurial:2.5.1"
}

// Can only choose the plugin versions once the task graph has been established because
// we need to know whether we're publishing a release or a snapshot.
project.gradle.taskGraph.whenReady {
    dependencies {
        runtime holygradle.util.Helper.choosePluginVersion(project, "holygradle", "credential-store")
        compile holygradle.util.Helper.choosePluginVersion(project, "holygradle", "custom-gradle-core-plugin")
    }
}