buildscript {
    gplugins.use "intrepid:${System.getProperty("holygradle.versionForIntegrationTest")}"
}
gplugins.apply()

configurations {
    preBuiltArtifacts
    pinnedSource
    pinnedSourceBad
}

sourceDependencies {
    // Add projectA sourceDependency.  We have both the target folder and the source repo being the same place, so that
    // we don't actually have to fetch any source.
    "../projectA" {
        hg new File(project.projectDir, "../projectA").toURI().toString()
    }
}

packageArtifacts {
    preBuiltArtifacts {
        to "preBuiltArtifacts"
        includeBuildScript {
            addPackedDependency "projectA", "preBuiltArtifacts->someConfig"
        }
    }
    pinnedSource {
        to "pinnedSource"
        includeBuildScript {
            addPinnedSourceDependency "projectA"
        }
    }
    pinnedSourceBad {
        to "pinnedSourceBad"
        includeBuildScript {
            addPinnedSourceDependency "nonExistentSourceDep"
        }
    }
}